<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <link href="../static/css/bootstrap.min.css" rel="stylesheet">
    <link href="../static/css/bootstrap4-toggle.min.css" rel="stylesheet">

    <title>Greenhouses</title>
</head>

<body>
    {% include 'nav.html'%}

    <div class="container p-2">

        <div class="card">
            <div class="card-header">
                <div class="row">
                    <div class="col">
                        <h3> {{data[0][2]}}</h3>
                    </div>
                    <div class="col">
                        <p class="text-end" id="ipAddres">{{data[0][1]}}</p>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <p class="card-text">
                <table class="table table-striped">
                    <tbody>
                        <tr>
                            <td colspan="3" class="table-dark">
                                Температура
                            </td>
                        </tr>
                        <tr>
                            <td>
                                {{names.temperature_a}} :
                            </td>
                            <td colspan="2">
                                <span id="temp_a"> {{sensors.temperature_a.val}}</span>°C
                                <i id="temp_a_change" class="fs-5 bi bi-dash"></i>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                {{names.temperature_b}} :
                            </td>
                            <td colspan="2">
                                <span id="temp_b"> {{sensors.temperature_b.val}}</span>°C
                                <i id="temp_b_change" class="fs-5 bi bi-dash"></i>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                {{names.temperature_c}} :
                            </td>
                            <td colspan="2">
                                <span id="temp_c"> {{sensors.temperature_c.val}}</span>°C
                                <i id="temp_c_change" class="fs-5 bi bi-dash"></i>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                {{names.temperature_d}} :
                            </td>
                            <td colspan="2">
                                <span id="temp_d"> {{sensors.temperature_d.val}}</span>°C
                                <i id="temp_d_change" class="fs-5 bi bi-dash"></i>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                {{names.temperature_e}} :
                            </td>
                            <td colspan="2">
                                <span id="temp_e"> {{sensors.temperature_e.val}}</span>°C
                                <i id="temp_e_change" class="fs-5 bi bi-dash"></i>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                {{names.temperature_DH}} :
                            </td>
                            <td colspan="2">
                                <span id="temp_f"> {{sensors.temperature_DH.val}}</span>°C
                                <i id="temp_f_change" class="fs-5 bi bi-dash"></i>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3" class="table-dark">
                                Влажность
                            </td>
                        </tr>
                        <tr>
                            <td>
                                {{names.humidity_a}} :
                            </td>
                            <td colspan="2">
                                <span id="hum_a"> {{sensors.humidity_a.val}}</span>%
                                <i id="hum_a_change" class="fs-5 bi bi-dash"></i>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                {{names.humidity_b}} :
                            </td>
                            <td colspan="2">
                                <span id="hum_b"> {{sensors.humidity_b.val}}</span>%
                                <i id="hum_b_change" class="fs-5 bi bi-dash"></i>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                {{names.humidity_c}} :
                            </td>
                            <td colspan="2">
                                <span id="hum_c"> {{sensors.humidity_c.val}}</span>%
                                <i id="hum_c_change" class="fs-5 bi bi-dash"></i>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                {{names.humidity_d}} :
                            </td>
                            <td colspan="2">
                                <span id="hum_d"> {{sensors.humidity_d.val}}</span>%
                                <i id="hum_d_change" class="fs-5 bi bi-dash"></i>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                {{names.humidity_DH}} :
                            </td>
                            <td colspan="2">
                                <span id="hum_e"> {{sensors.humidity_DH.val}}</span>%
                                <i id="hum_e_change" class="fs-5 bi bi-dash"></i>
                            </td>
                        </tr>
                        <tr>
                            <th scope="row" class="col-sm-2">
                                Вентиляторы
                                <div>
                                    <input id="fansControl" type="checkbox" {% if controls.fans_control_mode %} checked
                                        {% endif %} data-toggle="toggle" data-on="Авто" data-off="Ручной"
                                        data-size="sm">
                                </div>
                            </th>
                            <td class="table-success" id="fansStatus"></td>
                            <td>
                                <button class="btn" id="fan"></button>
                            </td>
                        </tr>
                        <tr>
                            <th scope="row" class="col-sm-2">
                                Насос
                                <div>
                                    <input id="pumpControl" type="checkbox" {% if controls.pump_control_mode %} checked
                                        {% endif %} data-toggle="toggle" data-on="Авто" data-off="Ручной"
                                        data-size="sm">
                                </div>
                            </th>
                            <td class="table-danger" id="pumpStatus"></td>
                            <td>
                                <button class="btn" id="pump"></button>
                            </td>
                        </tr>
                        <tr>
                            <th scope="row" class="col-sm-2">
                                Освещение
                                <div>
                                    <input id="lampsControl" type="checkbox" {% if controls.lamps_control_mode %}
                                        checked {% endif %} data-toggle="toggle" data-on="Авто" data-off="Ручной"
                                        data-size="sm">
                                </div>
                            </th>
                            <td class="table-danger" id="lampsStatus"></td>
                            <td>
                                <button class="btn" id="lamps"></button>
                            </td>
                        </tr>
                    </tbody>
                </table>
                </p>
                <br>
            </div>
        </div>
        <br>
        <div class="card">
            <div class="card-header">
                <h5>Настройки</h5>
            </div>
            <div class="card-body">
                <div class="card-header">
                    <div class="d-flex justify-content-start">

                        <h5 class="px-2">
                            Вентиляторы
                        </h5>
                        <div class="px-2 bg-dark text-white" id="fansOnTime">{{ghConfig.fans}}</div>°C
                    </div>
                </div>
                <p class="card-text">
                <form>
                    <div class="input-group mb-3">
                        <input type="number" class="form-control" id="fansTempOn" placeholder="Температура включения">
                        <span class="input-group-text">-</span>
                        <input type="number" class="form-control" id="fansTempOff" placeholder="Температура отключения">
                    </div>

                    <button type="submit" id="setNewFansTempBtn" class="btn btn-primary">Установить</button>
                </form>
                </p>
            </div>
            <div class="card-body">
                <div class="card-header">
                    <h5>
                        Насос
                    </h5>
                </div>
                <p class="card-text">
                <table class="table table-striped">
                    <tbody>
                        {% for key in ghConfig.pump %}
                        <tr>
                            <th class="col-md-2" scope="row">
                                <p id="blockName{{loop.index0}}">{{config[loop.index0]}}</p>
                                <button class="btn-sm btn-primary m-1" onclick="hideForm(this)" id="{{loop.index0}}"
                                    type="submit">
                                    Добавить
                                </button>
                            </th>
                            <td>
                                <ul name="{{loop.index0}}">
                                    {% for k in ghConfig.pump[key] %}
                                    <li class="d-inline-block p-1 bg-info m-1 position-relative">
                                        {{k}}
                                        <button type="button" id="removePumpTime"
                                            class="btn-close btn-sm position-absolute top-0 start-100 translate-middle"></button>
                                    </li>
                                    {% endfor %}
                                </ul>
                            </td>
                        <tr class="timeform" id="form{{loop.index0}}">
                            <td colspan="2">
                                <div class="">
                                    <form action="get">
                                        <div class="input-group mb-3">
                                            <input type="time" id="pumpTime{{loop.index0}}Start" class="form-control"
                                                placeholder="Start time">
                                            <span class="input-group-text">-</span>
                                            <input type="time" id="pumpTime{{loop.index0}}End" class="form-control"
                                                placeholder="End time">
                                        </div>

                                        <button type="submit" id="pumpTime{{loop.index0}}"
                                            name="{{config[loop.index0]}}"
                                            class="btn btn-primary pumpTimeBtn">Добавить</button>
                                    </form>
                                </div>
                            </td>
                        </tr>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                </p>
                <br>
            </div>
            <a href="/greenhouseSettings?ip={{data[0][1]}}" class="btn btn-primary m-3">Настройка отображения</a>
        </div>
    </div>
    <script src="../static/js/libs/jquery-3.5.1.js"></script>
    <script src="../static/js/libs/bootstrap4-toggle.min.js"></script>
    <script src="../static/js/greenhouse.js"></script>

</body>

</html>